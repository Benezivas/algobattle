
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Algobattle framework, an interactive, easy to use computer science lab course">
      
      
      
      
        <link rel="prev" href="../battle_types/">
      
      
        <link rel="next" href="../problems/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Docker - Algobattle</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7Cmonospace:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"monospace"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/termynal.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Algobattle" class="md-header__button md-logo" aria-label="Algobattle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Algobattle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Benezivas/algobattle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    benezivas/algobattle
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorial/" class="md-tabs__link">
          
  
    
  
  Tutorial

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  Advanced Topics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../instructor/" class="md-tabs__link">
          
  
    
  
  Instructor's Corner

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/" class="md-tabs__link">
          
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Algobattle" class="md-nav__button md-logo" aria-label="Algobattle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Algobattle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Benezivas/algobattle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    benezivas/algobattle
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tutorial/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing Algobattle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/programs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing programs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/match/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running a match
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conclusion
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced Topics
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../battle_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Battle Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Docker
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Basic functionality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfiles" class="md-nav__link">
    <span class="md-ellipsis">
      Dockerfiles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dockerfiles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-from-statement" class="md-nav__link">
    <span class="md-ellipsis">
      The FROM statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-the-workdir" class="md-nav__link">
    <span class="md-ellipsis">
      Changing the WORKDIR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copying-files" class="md-nav__link">
    <span class="md-ellipsis">
      COPYing files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-commands" class="md-nav__link">
    <span class="md-ellipsis">
      RUNning commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-the-program-cmd" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying the program CMD
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-and-tricks" class="md-nav__link">
    <span class="md-ellipsis">
      Tips and Tricks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tips and Tricks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#faster-builds-with-better-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Faster builds with better caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-images-yourself" class="md-nav__link">
    <span class="md-ellipsis">
      Building images yourself
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-containers-yourself" class="md-nav__link">
    <span class="md-ellipsis">
      Running containers yourself
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../problems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Problems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../instructor/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Instructor's Corner
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Instructor's Corner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/teaching_english/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab Course Teaching Concept
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Creating Problems
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Creating Problems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/problem/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/problem/problem_file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a Problem File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/problem/example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Complex Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/problem/advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/problem/annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Type Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../instructor/problem/io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arbitrary I/O Formats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/battle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Battle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/problem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Problem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/util/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Basic functionality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfiles" class="md-nav__link">
    <span class="md-ellipsis">
      Dockerfiles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dockerfiles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-from-statement" class="md-nav__link">
    <span class="md-ellipsis">
      The FROM statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-the-workdir" class="md-nav__link">
    <span class="md-ellipsis">
      Changing the WORKDIR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copying-files" class="md-nav__link">
    <span class="md-ellipsis">
      COPYing files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-commands" class="md-nav__link">
    <span class="md-ellipsis">
      RUNning commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-the-program-cmd" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying the program CMD
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-and-tricks" class="md-nav__link">
    <span class="md-ellipsis">
      Tips and Tricks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tips and Tricks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#faster-builds-with-better-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Faster builds with better caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-images-yourself" class="md-nav__link">
    <span class="md-ellipsis">
      Building images yourself
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-containers-yourself" class="md-nav__link">
    <span class="md-ellipsis">
      Running containers yourself
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link">&para;</a></h1>
<p>Algobattle uses Docker to run the programs students write. This lets us support students using any language, easily
restrict their time, space, and CPU usage, provide a safe environment, and much more.</p>
<h2 id="basic-functionality">Basic functionality<a class="headerlink" href="#basic-functionality" title="Permanent link">&para;</a></h2>
<p>If you haven't used Docker before, getting your head around what it's doing and what you need to do can be a bit
confusing. Luckily we do not need to understand most of its behind the scenes working and, the parts that we do need are
pretty straightforward. You can think of Docker as a virtual machine management tool, it lets you create <em>images</em> that
basically are save files of an entire computer including the OS and everything else installed on it. We can then run
these as <em>containers</em>, independent virtual machines that start off from that save file and then run some code.</p>
<p>Algobattle uses such images and containers to manage the students' programs. What we actually care about when receiving
e.g. the path to a generator is not all the source files and whatever else might be in that folder, but the Docker
image that can be built using it.</p>
<p>Since containers run essentially as virtual machines, they are entirely separate from the host machines' OS. In
particular, they do not share a file system. This is why the programs do not see the host machines actual files and
have to read/write from the <code>/input</code> and <code>/output</code> directories. Algobattle creates the containers with special links
between the host machine's file system and these folders and then looks only at these directories.</p>
<h2 id="dockerfiles">Dockerfiles<a class="headerlink" href="#dockerfiles" title="Permanent link">&para;</a></h2>
<p>Dockerfiles are what Docker uses to create images. When Algobattle is told that there's a generator in <code>generator/</code>, it
will ask Docker to <em>build</em> the Dockerfile in that folder. Docker then takes the file found at <code>generator/Dockerfile</code>
and interprets every line in it as a particular step in the build process. These steps are completed in order of their
occurrence in the Dockerfile. Once Docker has completed every step, the build is complete, and we get the finalized
image. This image will essentially look exactly like the virtual machine did after the last build step ran, plus some
special Docker metadata.</p>
<p>The full specification of what Dockerfiles can contain is <a href="https://docs.docker.com/engine/reference/builder/">here</a>, but
most of it is not super relevant for us. The most important commands are listed here:</p>
<h4 id="the-from-statement">The <code class="highlight"><span class="k">FROM</span></code> statement<a class="headerlink" href="#the-from-statement" title="Permanent link">&para;</a></h4>
<p>The first line of every Dockerfile has to be a <code class="highlight"><span class="k">FROM</span></code> statement, the most basic example is
<code class="highlight"><span class="k">FROM</span><span class="w"> </span><span class="s">scratch</span></code>. This line tells Docker what to base your image off of, <code class="highlight"><span class="k">FROM</span><span class="w"> </span><span class="s">scratch</span></code>
means that it starts with a completely empty file system. If we do that we need to first install an operating system,
configure it enough to be usable, and then install whatever we actually want to run. We can make our Dockerfiles much
simpler by using one of the already existing images in the <a href="https://hub.docker.com/"><em>Docker Hub</em></a>
in our <code class="highlight"><span class="k">FROM</span></code> statement instead. Instead of starting with an empty file system we then start with the file
system of that image.</p>
<p>All major operating systems have images containing a fresh installation of them on the Docker Hub. For example,
<a href="https://hub.docker.com/_/alpine">here</a> is the official Alpine image, <a href="https://hub.docker.com/_/ubuntu">here</a> is Ubuntu,
and <a href="https://hub.docker.com/_/debian">here</a> is Debian. If you want your code to run in a clean environment with nothing
else you can use any of these as your base.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In principle Docker can also run Windows OS's inside the containers, but this requires special setup on the host
machine. In particular, every image needs to then be a Windows image, there is no way to control both Linux and
Windows containers at the same time. We recommend course administrators configure Docker to run Linux containers
(this is the default) and inform students that they are required to use Linux in their images.</p>
<p>Talk to your course administrators if you are a student and unsure about what OS to use.</p>
</div>
<p>Since you want the container to execute some code you will most likely then need to install a compiler or runtime for
whatever language you're using. We can easily skip this intermediary step and instead base our image off of one that
already includes this. Most languages have officially published images that contain some Linux distro and an
installation of everything that compiler/interpreter needs to work. For example, <a href="https://hub.docker.com/_/python">here</a>
is Python's and <a href="https://hub.docker.com/_/rust">here</a> Rust's.</p>
<p>Images on the Docker Hub can also be versioned using tags. For example, the official Python image has dozens of slightly
different versions that come with different OS's, Python versions, etc. If you want to use a specific tag you need to
list it in the <code class="highlight"><span class="k">FROM</span></code> statement after a colon. For example, if your code needs Python 3.10 you can write
<code class="highlight"><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Different languages use different schemes for tagging their images. Always check the official page on the
<a href="https://hub.docker.com/">Docker Hub</a> to make sure you're getting the right version of everything.</p>
</div>
<h4 id="changing-the-workdir">Changing the <code class="highlight"><span class="k">WORKDIR</span></code><a class="headerlink" href="#changing-the-workdir" title="Permanent link">&para;</a></h4>
<p>As the name suggests, <code class="highlight"><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/some/dir</span></code> changes the current working directory. All subsequent commands
will be executed from <code>/some/dir</code>. Note that the path must be absolute. This also can also affect where the program
that runs when you start a container from the image if you change the working directory before the <code class="highlight"><span class="k">CMD</span></code>
or <code class="highlight"><span class="k">ENTRYPOINT</span></code> line.</p>
<h4 id="copying-files"><code class="highlight"><span class="k">COPY</span></code>ing files<a class="headerlink" href="#copying-files" title="Permanent link">&para;</a></h4>
<p>Now that we have a container that includes our language's runtime we also need to include our code and all other files
we may need. The <code class="highlight"><span class="k">COPY</span></code> command does exactly this. For it, we just list the path to the file on the host
file system, and the path it should be at in the image. Our example has the generator code in a single file next to the
Dockerfile, so we can place it into the root directory of the image with <code class="highlight"><span class="k">COPY</span><span class="w"> </span>main.py<span class="w"> </span>/</code>. Paths can be
absolute or relative, and you can specify multiple sources in a single line. You can also use a glob-like syntax to
match multiple specific files.</p>
<details class="example">
<summary>Example</summary>
<p>All of these are valid <code class="highlight"><span class="k">COPY</span></code> statements:</p>
<ul>
<li><code class="highlight"><span class="k">COPY</span><span class="w"> </span>some_file.py<span class="w"> </span>.</code> results in <code>some_file.py</code> being placed in the current directory</li>
<li><code class="highlight"><span class="k">COPY</span><span class="w"> </span>some_dir<span class="w"> </span>target_dir/</code> results in every file in <code>some_dir</code> and all its subfolders being placed
    in <code>target_dir/</code>, effectively copying over the entire tree rooted at <code>some_dir</code> and rooting it at <code>target_dir</code></li>
<li><code class="highlight"><span class="k">COPY</span><span class="w"> </span>nested/location/source.txt<span class="w"> </span>.</code> copied the source file into the current directory</li>
<li><code class="highlight"><span class="k">COPY</span><span class="w"> </span>multiple.py<span class="w"> </span>source.json<span class="w"> </span>files.txt<span class="w"> </span>single/target/dir/</code> copies both source files to the target
    directory</li>
<li><code class="highlight"><span class="k">COPY</span><span class="w"> </span>source.rs<span class="w"> </span>/absolute/target</code> copies the file into the target directory</li>
<li><code class="highlight"><span class="k">COPY</span><span class="w"> </span>*.py<span class="w"> </span>/</code> copies all Python files in the current directory into the root of the image</li>
</ul>
</details>
<div class="admonition warning">
<p class="admonition-title">The build context</p>
<p>You cannot <code class="highlight"><span class="k">COPY</span></code> files outside the directory containing the Dockerfile. That is
<code class="highlight"><span class="k">COPY</span><span class="w"> </span>../../something<span class="w"> </span>./</code> will not work. This is not a limitation of Algobattle but just a side effect
of how Docker works.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">trailing slashes</p>
<p>Notice how we sometimes specify trailing slashes even though they're not strictly needed. This is to make sure that
Docker knows we are referring to a directory, not a file. If you just write <code class="highlight"><span class="k">COPY</span><span class="w"> </span>something<span class="w"> </span>other</code>
and <code>something</code> is a file it will place it into the current directory and rename it <code>other</code>. If you want it to
instead keep the name and place it in the <code>other/</code> directory, you need to include the trailing slash.</p>
</div>
<h4 id="running-commands"><code class="highlight"><span class="k">RUN</span></code>ning commands<a class="headerlink" href="#running-commands" title="Permanent link">&para;</a></h4>
<p>You can use <code class="highlight"><span class="k">RUN</span><span class="w"> </span>some<span class="w"> </span>shell<span class="w"> </span>command</code> to execute <code class="highlight">some<span class="w"> </span>shell<span class="w"> </span><span class="nb">command</span></code> in a shell during the image
build step. This command will have access to everything that was copied into the image beforehand and anything that
previously ran commands created. Most often, this is used to install dependencies of your program.</p>
<p>This statement has two forms, the first <code class="highlight"><span class="k">RUN</span><span class="w"> </span>some<span class="w"> </span>shell<span class="w"> </span>command</code>, and the other
<code class="highlight"><span class="k">RUN</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;some&quot;</span>,<span class="w"> </span><span class="s2">&quot;shell&quot;</span>,<span class="w"> </span><span class="s2">&quot;command&quot;</span><span class="o">]</span></code>. For our purposes they do largely the same thing, but their differences
are explained <a href="https://docs.docker.com/engine/reference/builder/#run">here</a></p>
<h4 id="specifying-the-program-cmd">Specifying the program <code class="highlight"><span class="k">CMD</span></code><a class="headerlink" href="#specifying-the-program-cmd" title="Permanent link">&para;</a></h4>
<p>Lastly, the container that runs from your image needs to know what it should actually do. You can specify this with the
<code class="highlight"><span class="k">CMD</span></code> statement. Its arguments form some shell command that is not executed during the build step,
but when the container starts.</p>
<p>Similar to run this command also has the same two forms, and you can choose whichever you prefer, though the list style
syntax is usually preferred. They are explained in detail <a href="https://docs.docker.com/engine/reference/builder/#cmd">here</a>.</p>
<h2 id="tips-and-tricks">Tips and Tricks<a class="headerlink" href="#tips-and-tricks" title="Permanent link">&para;</a></h2>
<h3 id="faster-builds-with-better-caching">Faster builds with better caching<a class="headerlink" href="#faster-builds-with-better-caching" title="Permanent link">&para;</a></h3>
<p>Building docker images can take quite a long time depending on what is happening in the build. When you're developing
your programs and keep making small changes to your code before rebuilding this can be incredibly annoying. Luckily
Docker implements a cache of so-called <em>layers</em> for us. You can think of layers as basically being break points in
between every line in your Dockerfile. Let's look at an example:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.11</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/algobattle</span>
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>./
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-m&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;generator&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<p>The first layer is just the original Python base image, the next is the base image plus the change of the working
directory, then the base image plus the changed working directory, plus the copied files, etc. If you now build this
Dockerfile Docker will automatically cache every layer separately. Subsequent builds will then use these cached layers
up until the point where things have changed and thus need to be built again.</p>
<p>The important part here is being aware of what causes Docker to invalidate caches, and make sure that it happens as
late in the Dockerfile as possible. <code class="highlight"><span class="k">COPY</span></code> commands invalidate caches whenever the files you're copying
over have changed. This means that every time you make a code change to the above code you invalidate the cache used
for the <code class="highlight"><span class="k">COPY</span></code> and all subsequent commands, which means that pip has to reinstall every dependency every
time you rebuild the image. To better cache your dependencies you can install them before you copy over your code:</p>
<div class="highlight"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.11</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/algobattle</span>
<span class="k">COPY</span><span class="w"> </span>pyproject.toml<span class="w"> </span>./
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>./
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-m&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;generator&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<p>This might look slower at first glance since it's doing a lot more, and it will be slightly slower during the first
build, but if you're using dependencies that take a bit to install this will be much faster in the long run. Obviously,
the same ideas apply to other languages. To make the best use of the cache, you want your <code class="highlight"><span class="k">COPY</span></code> commands
to be as selective as possible and be executed as late as possible.</p>
<div class="admonition info">
<p class="admonition-title"><code class="highlight"><span class="k">RUN</span></code> and caching</p>
<p>The <code class="highlight"><span class="k">RUN</span></code> command never invalidates the cache! Even if you are running some command that e.g. pulls
from the web and the content of that download changes, Docker will not rerun it unless something before it created
a cache miss. This is great most of the time since we're downloading deterministic data like dependencies, but can
cause issues if you expect to dynamically update data.</p>
</div>
<h3 id="building-images-yourself">Building images yourself<a class="headerlink" href="#building-images-yourself" title="Permanent link">&para;</a></h3>
<p>Sometimes it's nice to build images yourself to debug them. You can find the full documentation on the
<a href="https://docs.docker.com/engine/reference/commandline/build/">Docker build page</a>, but the basics aren't as complicated
as they make it out to be! In its purest form you just run</p>
<div class="highlight"><pre><span></span><code><span class="go">docker build path/to/build/dir</span>
</code></pre></div>
<p>With a path pointing to the directory containing the Dockerfile you want to build. This will then build the image and
display a detailed log including any error messages in the console. If you want to then refer back to the image you'll
have to use its ID, which can become quite annoying, so you probably want to tag the image when you build it:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker build -t some_name path/to/build/dir</span>
</code></pre></div>
<h3 id="running-containers-yourself">Running containers yourself<a class="headerlink" href="#running-containers-yourself" title="Permanent link">&para;</a></h3>
<p>You will probably also want to run containers yourself. This command is very powerful and even more complicated, if
you're feeling brave you can check out the docs on the
<a href="https://docs.docker.com/engine/reference/commandline/run/">Docker run page</a>. The most common style of command you will
need is</p>
<div class="highlight"><pre><span></span><code><span class="go">docker run -ti some_name</span>
</code></pre></div>
<p>This runs the container and then mirrors its stdin, stdout, and stderr to your console, effectively behaving as though
you've opened a terminal inside the running container. <code>some_name</code> needs to be the same name you gave the image when
you built it.</p>
<div class="admonition tip">
<p class="admonition-title">Algobattle image names</p>
<p>If you're using the <code>name_images</code> Algobattle setting (defaults to <code class="highlight"><span class="n">true</span></code>) the images Algobattle creates will
be named like <code>algobattle_{team_name}_{program_type}</code>, so e.g. <code>algobattle_crows_generator</code> or
<code>algobattle_red_pandas_solver</code>. You can run these directly without having to build them yourself.</p>
</div>
<p>Since the program expects the usual Algobattle input in the <code>/input</code> directory, which will be missing if you run it
yourself, the container will most likely just crash. What's more useful is to tell Docker to use some other command
when running the container. Like this:</p>
<div class="highlight"><pre><span></span><code><span class="go">docker run -ti some_name bash</span>
</code></pre></div>
<p>This will run <code>some_name</code> but without executing the <code class="highlight"><span class="k">CMD</span></code> command and running <code>bash</code> instead. So we
effectively just open a terminal inside the container and can then inspect the container, build artefacts, etc to debug
things.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../js/termynal.js"></script>
      
        <script src="../../js/custom.js"></script>
      
    
  </body>
</html>