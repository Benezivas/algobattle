
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Algobattle framework, an interactive, easy to use computer science lab course">
      
      
      
      
        <link rel="prev" href="../advanced/">
      
      
        <link rel="next" href="../io/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Advanced Type Annotations - Algobattle</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7Cmonospace:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"monospace"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/termynal.css">
    
      <link rel="stylesheet" href="../../../css/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-type-annotations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Algobattle" class="md-header__button md-logo" aria-label="Algobattle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Algobattle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Advanced Type Annotations
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Benezivas/algobattle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    benezivas/algobattle
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorial/" class="md-tabs__link">
          
  
    
  
  Tutorial

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../advanced/" class="md-tabs__link">
          
  
    
  
  Advanced Topics

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Instructor's Corner

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api/" class="md-tabs__link">
          
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Algobattle" class="md-nav__button md-logo" aria-label="Algobattle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Algobattle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Benezivas/algobattle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    benezivas/algobattle
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../tutorial/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorial/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing Algobattle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorial/getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorial/programs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing programs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorial/match/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running a match
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorial/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conclusion
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../advanced/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced Topics
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/battle_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Battle Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../advanced/problems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Problems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Instructor's Corner
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Instructor's Corner
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teaching_english/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab Course Teaching Concept
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Creating Problems
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Creating Problems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../problem_file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a Problem File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Complex Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Advanced Type Annotations
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Advanced Type Annotations
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Type Aliases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forward-references" class="md-nav__link">
    <span class="md-ellipsis">
      Forward References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotated-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Annotated Metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-references" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-pydantic-features" class="md-nav__link">
    <span class="md-ellipsis">
      Further Pydantic Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Further Pydantic Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attribute-reference-validators" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute Reference Validators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-context" class="md-nav__link">
    <span class="md-ellipsis">
      Validation Context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arbitrary I/O Formats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/battle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Battle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/problem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Problem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../api/util/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utility
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Type Aliases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forward-references" class="md-nav__link">
    <span class="md-ellipsis">
      Forward References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotated-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Annotated Metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-references" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-pydantic-features" class="md-nav__link">
    <span class="md-ellipsis">
      Further Pydantic Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Further Pydantic Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attribute-reference-validators" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute Reference Validators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-context" class="md-nav__link">
    <span class="md-ellipsis">
      Validation Context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="advanced-type-annotations">Advanced Type Annotations<a class="headerlink" href="#advanced-type-annotations" title="Permanent link">&para;</a></h1>
<p>We've already seen how you can use type annotations to declare what shape the I/O data should have and perform basic
validation. This page will go over more advanced usages of type annotations that Algobattle and Pydantic provide for us.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While validation via type annotations can be very useful and much faster than plain python methods, they are not
necessary for most problems.
Everything covered here can also be done with validation methods (<code>validate_instance</code> / <code>validate_solution</code>). If
you're more comfortable with those rather than type annotations, feel free to use them instead.</p>
</div>
<h2 id="type-aliases">Type Aliases<a class="headerlink" href="#type-aliases" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is not specific to Algobattle and just covers general Python techniques, feel free to skip it if you're
already familiar with it.</p>
</div>
<p>When using complicated types our annotations can get very complicated quickly. We can simplify the code by defining
type aliases, which basically just are variables but for types. For example, consider this class</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span>
    <span class="n">matchings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span>
</code></pre></div>
<p>Its attributes are rather terse and hard to understand what exactly a list of sets of tuples of integers is supposed
to represent. This can be simplified by creating a couple of type aliases. The syntax used depends a bit on your Python
version and how explicit you want (and have) to be, but they all do the same thing.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">3.11 implicit</label><label for="__tabbed_1_2">3.11 explicit</label><label for="__tabbed_1_3">&gt;= 3.12</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">Edge</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="n">Matching</span> <span class="o">=</span> <span class="nb">set</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span>
    <span class="n">matchings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Matching</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">Edge</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="n">Matching</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="nb">set</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span>
    <span class="n">matchings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Matching</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nb">type</span> <span class="n">Edge</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="nb">type</span> <span class="n">Matching</span> <span class="o">=</span> <span class="nb">set</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span><span class="p">]</span>
    <span class="n">matchings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Matching</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<p>This is particularly useful if you want to reuse a type definition, or one is very long. But it's also great to tell
others reading your code what you actually intended each piece to mean by just giving things more descriptive names.
For example, the <code>Vertex</code> type in <code>algobattle.types</code> actually just is a descriptive alias for the more general
<code>SizeIndex</code>.</p>
<h2 id="forward-references">Forward References<a class="headerlink" href="#forward-references" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is not specific to Algobattle and just covers general Python techniques, feel free to skip it if you're
already familiar with it.</p>
</div>
<p>Python files are executed from top to bottom and this also includes type hints. This means that you cannot use types
and classes that you define later in a type hint. In practice, this is not something you very often want to do in
problem definitions anyway, but it's worth keeping in mind. For example, let's say we want to specify a type which
emulates the way paths in a file system work. That is, it can either just be the name of a file, or correspond to
folder containing more files and folders. Ideally, we'd want just recursively define it like this:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">3.11 implicit</label><label for="__tabbed_2_2">3.11 explicit</label><label for="__tabbed_2_3">&gt;= 3.12</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">Path</span> <span class="o">=</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">Path</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nb">type</span> <span class="n">Path</span> <span class="o">=</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span>
</code></pre></div>
</div>
</div>
</div>
<p>But at the time that the <code>Path</code> on the right-hand side gets evaluated it will be an undefined variable and thus throw
an error. We can solve that by wrapping the entire expression in a string. The Python interpreter will then not evaluate
the individual variables, but type checkers and Pydantic will still interpret them correctly. The problem then is that
if we use the implicit version type checkers think that we just mean some meaningless string and not a type hint.
Because of this we actually have to use the explicit version when quoting forward references.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">3.11 explicit</label><label for="__tabbed_3_2">&gt;= 3.12</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">Path</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="s2">&quot;str | dict[str, Path]&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nb">type</span> <span class="n">Path</span> <span class="o">=</span> <span class="s2">&quot;str | dict[str, Path]&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The <code>type</code> syntax introduced in 3.12 actually allows you to write this specific example without the quotes. But it
only allows for forward references to the type you're defining itself to be unquoted, all other uses of forward
references still need to be quoted.</p>
</div>
<p>You can also use quoted forward references in any other place you'd use a type hint, though for the types used in a
problem definition we can usually prevent them altogether by just reordering the code.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">some_attr</span><span class="p">:</span> <span class="s2">&quot;CoolNumber&quot;</span>

<span class="n">CoolNumber</span> <span class="o">=</span> <span class="nb">int</span>
</code></pre></div>
<h2 id="annotated-metadata">Annotated Metadata<a class="headerlink" href="#annotated-metadata" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Type Hints and Annotations</p>
<p>Usually <em>type hint</em> and <em>type annotation</em> are used interchangeably, they just refer to the thing after the colon
following an attribute name. Since this section also deals with the <code>Annotated[...]</code> type construct we will use
type hints here when talking about the general construct to differentiate it from this specific object.</p>
</div>
<p>In the basic tutorial we've already seen that we can add validation to a field using <code>Annotated[...]</code> metadata. This is
a very powerful construct that is heavily used by Algobattle and Pydantic, so we'll take a deeper look at it now. In
Python type hints are not only used by linters and type checkers to make sure your code does what you want it to,
but can also be examined at runtime. This is how Pydantic (and thus Algobattle) knows what you want the json files to
look like, it sees an attribute that's been marked as an <code>int</code>, so it will expect an integer at that place of the json
file. This is a really clever method because it will automatically validate the json without us explicitly telling us
what it should do, it just gets all the info it needs from the type hints.</p>
<p>But sometimes we would want to tell the validator more than we can express in a type hint. For example, we might want to
only allow positive numbers, but Python does not have a type specifically for that. In earlier versions of Pydantic you
would then specify this using its <code>Field</code> specifier like this</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">positive_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>where the <code>gt</code> key tells Pydantic that it should validate this field as being greater than 0. This works great when you
want to have this behaviour on only a single attribute, but leads to a lot of code duplication when you want it in more
places and lets you forget it easily.</p>
<p>The idea behind <code>Annotated[...]</code> is that it lets us annotate a Python type with some additional metadata that is
irrelevant for type checkers, but tells other tools like Pydantic what they should do. It receives at least two
arguments, the first of which must be a type and all the others are arbitrary metadata. This lets easily specify how
several fields should be validated with a single <code>Field</code>.</p>
<div class="highlight"><pre><span></span><code><span class="n">PositiveInt</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)]</span>

<span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">first</span><span class="p">:</span> <span class="n">PositiveInt</span>
    <span class="n">second</span><span class="p">:</span> <span class="n">PositiveInt</span>
    <span class="n">third</span><span class="p">:</span> <span class="n">PositiveInt</span>
    <span class="n">fourth</span><span class="p">:</span> <span class="n">PositiveInt</span>
</code></pre></div>
<p>The Python standard library <code>annotated_types</code> also contains a collection of basic metadata types such as <code>Gt</code>, <code>Ge</code>,
<code>Lt</code>, <code>Le</code> that Pydantic will also interpret the same way as a <code>Field</code> with the corresponding key set.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>In this class, all attributes will be validated as an integer between 3 and 17 inclusive.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">first</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="n">second</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">18</span><span class="p">)]</span>
    <span class="n">third</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Ge</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">Lt</span><span class="p">(</span><span class="mi">18</span><span class="p">)]</span>
    <span class="n">fourth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Interval</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">18</span><span class="p">)]</span>
</code></pre></div>
</div>
<p>The <code>algobattle.types</code> module also contains versions of these that behave identically for these use cases. We will later
see some capabilities of the Algobattle metadata that neither other option can do, but for most problems you can use
whichever method you prefer.</p>
<p>The full list of available <code>Field</code> keys can be found in the
<a href="https://docs.pydantic.dev/latest/concepts/fields">Pydantic documentation</a>. The available <code>algobattle.types</code> metadata
is:</p>
<ul>
<li><code>Gt</code>, <code>Ge</code>, <code>Lt</code>, <code>Le</code>, and <code>Interval</code>: All specify a constraint on numeric data. The first four provide the
    corresponding inequality and <code>Interval</code> lets you group multiple of them together by using its keyword arguments.</li>
<li><code>MultipleOf</code>: Specifies that a numeric value is a multiple of some value. E.g. a field using
    <code>Annotated[int, MultipleOf(2)]</code> validates that the number in it is even.</li>
<li><code>MinLen</code>, <code>MaxLen</code>, and <code>Len</code>: Specifies that some collection's length has the corresponding property. <code>Len</code> again
    serves to group the other two into a single object. E.g. <code>Annotated[set, MinLen(17)]</code> allows only sets that have
    at least 17 elements.</li>
<li><code>UniqueItems</code>: Specifies that a collection contains no duplicate elements. E.g. <code>Annotated[list, UniqueItems]</code>
    validates that the list contains no element twice.</li>
<li><code>In</code>: Specifies that some value is contained in a collection. E.g. <code>Annotated[int, In({1, 3, 17, 95})]</code>
    allows only 1, 3, 17, or 95.</li>
<li><code>IndexInto</code>: Specifies that a value is a valid index into some list. E.g.
    <code>Annotated[int, IndexInto(["a", "b", "c"])]</code> only allows numbers between 0 and 2.</li>
</ul>
<h2 id="attribute-references">Attribute References<a class="headerlink" href="#attribute-references" title="Permanent link">&para;</a></h2>
<p>The <code>Field</code> specifiers and default metadata options cover a wide variety of use cases, but there are some validations
that cannot be done with it. For example, consider the simple problem of finding the biggest number in a list. We
can easily validate that the number actually is an element of the list with a <code>validate_solution</code> method like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Instance</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">numbers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">biggest</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span> <span class="nf">validate_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">role</span><span class="p">:</span> <span class="n">Role</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">biggest</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">numbers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;The given number is not in the instance&quot;</span><span class="p">)</span>
</code></pre></div>
<p>But we cannot do this with the <code>In</code> annotation metadata since there we need to provide the list of items to check
against at the time we write the type hint, but we only actually get that list when we validate the solution. The
<code>InstanceRef</code> and <code>SolutionRef</code> types in the <code>algobattle.problem</code> module fix this issue. They can be used to tell
Algobattle that we do not actually want to compare against a value we have right now, but with a value that we know
will be found in the instance or solution. Our example problem then becomes simplified to this.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Instance</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">numbers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="n">InstanceModel</span><span class="p">):</span>

    <span class="n">biggest</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">In</span><span class="p">(</span><span class="n">InstanceRef</span><span class="o">.</span><span class="n">numbers</span><span class="p">)]</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We cannot statically ensure that the attributes you reference actually exist on the instance or solution. This
means that if you e.g. have a typo or change a definition without updating a reference to it, the validation step
will throw an error at runtime even though type checkers and linters do not raise any warnings.</p>
<p>You also need to make sure you always use these in contexts where the referred to value actually makes sense. For
example, referring to an attribute of a solution when validating an instance or self-referential attributes can
lead to issues during validation. Especially in the latter case we also cannot guarantee that an error is raised in
cases where the references do not behave in the way you intended and instead will just fail silently.</p>
</div>
<details class="info">
<summary>Performance</summary>
<p>Due to implementation details references to the object that is being validated itself (i.e. <code>SolutionRef</code> in a
solution or <code>InstanceRef</code> in an instance) will lead to two separate invocations of Pydantic's validation logic.
This is perfectly fine in basically all use cases, but when you implement very slow custom logic using it, are
validating truly massive amounts of data (several gigabytes at a time) it can lead to slowdowns.</p>
</details>
<h2 id="further-pydantic-features">Further Pydantic Features<a class="headerlink" href="#further-pydantic-features" title="Permanent link">&para;</a></h2>
<p>There are many more Pydantic features that can be very useful when designing problems. They are all explained very well
in their official documentation. In particular,
<a href="https://docs.pydantic.dev/latest/concepts/validators/#annotated-validators">annotated validators</a>,
<a href="https://docs.pydantic.dev/latest/concepts/validators/#annotated-validators">model validators</a>,
<a href="https://docs.pydantic.dev/latest/concepts/fields/">field specifiers</a>,
<a href="https://docs.pydantic.dev/latest/concepts/unions/#discriminated-unions">tagged unions</a>,
and <a href="https://docs.pydantic.dev/latest/concepts/types/#custom-types">custom types</a> are very useful for Algobattle
problems.</p>
<h3 id="attribute-reference-validators">Attribute Reference Validators<a class="headerlink" href="#attribute-reference-validators" title="Permanent link">&para;</a></h3>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>This is an advanced feature and will make most sense to you if you already understand 
<a href="https://docs.pydantic.dev/latest/concepts/validators/#annotated-validators">annotated validators</a>.</p>
</div>
<p>Similar to the <code>algobattle.types</code> versions of metadata annotations, <code>algobattle.problem</code> also contains the
<code>AttributeReferenceValidator</code>. It functions just like a Pydantic <code>AfterValidator</code> (and is implemented using it), but
the validation function also receives the value of a referenced attribute.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>If we wanted to confirm that a line of text is indented by as many spaces as are given in the instance we can
create this annotated type:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_indentation</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">val</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent_level</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>

<span class="n">IndentedLine</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AttributeReferenceValidator</span><span class="p">(</span><span class="n">check_indentation</span><span class="p">,</span> <span class="n">InstanceRef</span><span class="o">.</span><span class="n">indentation</span><span class="p">)]</span>
</code></pre></div>
</div>
<h3 id="validation-context">Validation Context<a class="headerlink" href="#validation-context" title="Permanent link">&para;</a></h3>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>This is an advanced feature and will make most sense to you if you already understand 
<a href="https://docs.pydantic.dev/latest/concepts/validators/#validation-context">validation context</a>.</p>
</div>
<p>Algobattle will include certain useful data in the validation context. The full list of available keys is:</p>
<dl>
<dt><code>max_size</code></dt>
<dd>
<p>Contains the maximum allowed instance size of the current fight. Will always be present.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Keep in mind that this is a different value from the current instance's size. You usually want to use the latter
when validating data.</p>
</div>
</dd>
<dt><code>role</code></dt>
<dd>Contains the role of the program whose output is currently being validated. Will always be present.</dd>
<dt><code>instance</code></dt>
<dd>Contains the current instance. Optional key.</dd>
<dt><code>solution</code></dt>
<dd>Contains the current solution. Optional key.</dd>
<dt><code>self</code></dt>
<dd>Contains the object that is currently being validated. Optional key.</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to implementation details we sometimes need to validate data multiple times, with intermediate runs only
receiving partial validation contexts. Because of this always make sure that you check if the keys you are
accessing are currently present and do not raise an error if they aren't.</p>
<p>When using the references to the object that is currently being validated keep in mind that you are accessing an
intermediate representation of it that is not guaranteed to have the properties enforced by any other functions
that rely on references to the object itself.</p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.annotate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../../js/termynal.js"></script>
      
        <script src="../../../js/custom.js"></script>
      
    
  </body>
</html>